{
  "info": {
    "name": "FHIR - Operaciones Básicas",
    "description": "Colección completa de operaciones CRUD para recursos FHIR según la guía práctica. Incluye todas las operaciones: CREATE, READ, UPDATE, DELETE, SEARCH y CapabilityStatement.",
    "_postman_id": "fhir-operaciones-completas-2025",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "01 - Get CapabilityStatement",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/metadata",
          "host": ["{{base_url}}"],
          "path": ["metadata"]
        },
        "description": "Obtiene el CapabilityStatement del servidor FHIR, que contiene información sobre los recursos y operaciones soportadas."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is JSON\", function () {",
              "    pm.response.to.be.json;",
              "});",
              "",
              "pm.test(\"Has resourceType CapabilityStatement\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"CapabilityStatement\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "02 - Create Patient (POST)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          },
          {
            "key": "Content-Type",
            "value": "application/fhir+json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"resourceType\": \"Patient\",\n  \"identifier\": [\n    {\n      \"use\": \"official\",\n      \"type\": {\n        \"coding\": [\n          {\n            \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\",\n            \"code\": \"CC\",\n            \"display\": \"Cédula de Ciudadanía\"\n          }\n        ]\n      },\n      \"system\": \"http://www.registraduria.gov.co/\",\n      \"value\": \"12345678\"\n    }\n  ],\n  \"active\": true,\n  \"name\": [\n    {\n      \"use\": \"official\",\n      \"family\": \"García\",\n      \"given\": [\"Juan\", \"Carlos\"]\n    }\n  ],\n  \"telecom\": [\n    {\n      \"system\": \"phone\",\n      \"value\": \"+57-300-1234567\",\n      \"use\": \"mobile\"\n    },\n    {\n      \"system\": \"email\",\n      \"value\": \"[email protected]\",\n      \"use\": \"home\"\n    }\n  ],\n  \"gender\": \"male\",\n  \"birthDate\": \"1990-05-15\",\n  \"address\": [\n    {\n      \"use\": \"home\",\n      \"type\": \"physical\",\n      \"line\": [\"Calle 100 #45-67\", \"Apartamento 301\"],\n      \"city\": \"Bogotá\",\n      \"state\": \"Cundinamarca\",\n      \"postalCode\": \"110111\",\n      \"country\": \"CO\"\n    }\n  ],\n  \"maritalStatus\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-MaritalStatus\",\n        \"code\": \"S\",\n        \"display\": \"Never Married\"\n      }\n    ]\n  }\n}"
        },
        "url": {
          "raw": "{{base_url}}/Patient",
          "host": ["{{base_url}}"],
          "path": ["Patient"]
        },
        "description": "Crea un nuevo recurso Patient con datos de ejemplo de un paciente colombiano."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Response is JSON\", function () {",
              "    pm.response.to.be.json;",
              "});",
              "",
              "pm.test(\"Has resourceType Patient\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Patient\");",
              "});",
              "",
              "pm.test(\"Save patient ID\", function () {",
              "    var jsonData = pm.response.json();",
              "    if (jsonData.id) {",
              "        pm.environment.set(\"patient_id\", jsonData.id);",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "03 - Read Patient (GET)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/Patient/{{patient_id}}",
          "host": ["{{base_url}}"],
          "path": ["Patient", "{{patient_id}}"]
        },
        "description": "Lee un recurso Patient específico usando su ID."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is JSON\", function () {",
              "    pm.response.to.be.json;",
              "});",
              "",
              "pm.test(\"Has resourceType Patient\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Patient\");",
              "});",
              "",
              "pm.test(\"Patient ID matches\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.id).to.eql(pm.environment.get(\"patient_id\"));",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "04 - Update Patient (PUT)",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          },
          {
            "key": "Content-Type",
            "value": "application/fhir+json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"resourceType\": \"Patient\",\n  \"id\": \"{{patient_id}}\",\n  \"identifier\": [\n    {\n      \"use\": \"official\",\n      \"type\": {\n        \"coding\": [\n          {\n            \"system\": \"http://terminology.hl7.org/CodeSystem/v2-0203\",\n            \"code\": \"CC\",\n            \"display\": \"Cédula de Ciudadanía\"\n          }\n        ]\n      },\n      \"system\": \"http://www.registraduria.gov.co/\",\n      \"value\": \"12345678\"\n    }\n  ],\n  \"active\": true,\n  \"name\": [\n    {\n      \"use\": \"official\",\n      \"family\": \"García\",\n      \"given\": [\"Juan\", \"Carlos\", \"Alberto\"]\n    }\n  ],\n  \"telecom\": [\n    {\n      \"system\": \"phone\",\n      \"value\": \"+57-300-1234567\",\n      \"use\": \"mobile\"\n    },\n    {\n      \"system\": \"phone\",\n      \"value\": \"+57-1-6543210\",\n      \"use\": \"work\"\n    },\n    {\n      \"system\": \"email\",\n      \"value\": \"[email protected]\",\n      \"use\": \"work\"\n    }\n  ],\n  \"gender\": \"male\",\n  \"birthDate\": \"1990-05-15\",\n  \"address\": [\n    {\n      \"use\": \"home\",\n      \"type\": \"physical\",\n      \"line\": [\"Calle 100 #45-67\", \"Apartamento 301\"],\n      \"city\": \"Bogotá\",\n      \"state\": \"Cundinamarca\",\n      \"postalCode\": \"110111\",\n      \"country\": \"CO\"\n    }\n  ],\n  \"maritalStatus\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-MaritalStatus\",\n        \"code\": \"S\",\n        \"display\": \"Never Married\"\n      }\n    ]\n  }\n}"
        },
        "url": {
          "raw": "{{base_url}}/Patient/{{patient_id}}",
          "host": ["{{base_url}}"],
          "path": ["Patient", "{{patient_id}}"]
        },
        "description": "Actualiza un recurso Patient existente. Nota: Debe incluir el campo 'id' y todos los campos del recurso."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is JSON\", function () {",
              "    pm.response.to.be.json;",
              "});",
              "",
              "pm.test(\"Has resourceType Patient\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Patient\");",
              "});",
              "",
              "pm.test(\"Version ID increased\", function () {",
              "    var jsonData = pm.response.json();",
              "    if (jsonData.meta && jsonData.meta.versionId) {",
              "        pm.expect(parseInt(jsonData.meta.versionId)).to.be.at.least(2);",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "05 - Search Patient by Family Name",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/Patient?family=García",
          "host": ["{{base_url}}"],
          "path": ["Patient"],
          "query": [
            {
              "key": "family",
              "value": "García"
            }
          ]
        },
        "description": "Busca pacientes por apellido usando el parámetro 'family'."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is Bundle\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "06 - Search Patient by Gender",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/Patient?gender=male",
          "host": ["{{base_url}}"],
          "path": ["Patient"],
          "query": [
            {
              "key": "gender",
              "value": "male"
            }
          ]
        },
        "description": "Busca pacientes por género."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is Bundle\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "07 - Search Patient Combined",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/Patient?family=García&gender=male&birthdate=gt1985-01-01",
          "host": ["{{base_url}}"],
          "path": ["Patient"],
          "query": [
            {
              "key": "family",
              "value": "García"
            },
            {
              "key": "gender",
              "value": "male"
            },
            {
              "key": "birthdate",
              "value": "gt1985-01-01"
            }
          ]
        },
        "description": "Búsqueda combinada de pacientes usando múltiples parámetros: apellido, género y fecha de nacimiento."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is Bundle\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "08 - Search Patient by Identifier",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/Patient?identifier=12345678",
          "host": ["{{base_url}}"],
          "path": ["Patient"],
          "query": [
            {
              "key": "identifier",
              "value": "12345678"
            }
          ]
        },
        "description": "Busca pacientes por identificador (número de documento)."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is Bundle\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "09 - Delete Patient (DELETE)",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{base_url}}/Patient/{{patient_id}}",
          "host": ["{{base_url}}"],
          "path": ["Patient", "{{patient_id}}"]
        },
        "description": "Elimina un recurso Patient. Advertencia: Esta operación eliminará el recurso permanentemente."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200 or 204\", function () {",
              "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "10 - Create Condition",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          },
          {
            "key": "Content-Type",
            "value": "application/fhir+json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"resourceType\": \"Condition\",\n  \"clinicalStatus\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\",\n        \"code\": \"active\"\n      }\n    ]\n  },\n  \"verificationStatus\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\",\n        \"code\": \"confirmed\"\n      }\n    ]\n  },\n  \"category\": [\n    {\n      \"coding\": [\n        {\n          \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\",\n          \"code\": \"encounter-diagnosis\"\n        }\n      ]\n    }\n  ],\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://hl7.org/fhir/sid/icd-10\",\n        \"code\": \"I10\",\n        \"display\": \"Hipertensión esencial (primaria)\"\n      }\n    ]\n  },\n  \"subject\": {\n    \"reference\": \"Patient/{{patient_id}}\"\n  },\n  \"recordedDate\": \"2025-01-15T10:30:00Z\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/Condition",
          "host": ["{{base_url}}"],
          "path": ["Condition"]
        },
        "description": "Crea un nuevo recurso Condition (diagnóstico) asociado a un Patient."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Has resourceType Condition\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Condition\");",
              "});",
              "",
              "pm.test(\"Save condition ID\", function () {",
              "    var jsonData = pm.response.json();",
              "    if (jsonData.id) {",
              "        pm.environment.set(\"condition_id\", jsonData.id);",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "11 - Read Condition",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/Condition/{{condition_id}}",
          "host": ["{{base_url}}"],
          "path": ["Condition", "{{condition_id}}"]
        },
        "description": "Lee un recurso Condition específico."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Has resourceType Condition\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Condition\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "12 - Update Condition",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          },
          {
            "key": "Content-Type",
            "value": "application/fhir+json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"resourceType\": \"Condition\",\n  \"id\": \"{{condition_id}}\",\n  \"clinicalStatus\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\",\n        \"code\": \"resolved\"\n      }\n    ]\n  },\n  \"verificationStatus\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\",\n        \"code\": \"confirmed\"\n      }\n    ]\n  },\n  \"category\": [\n    {\n      \"coding\": [\n        {\n          \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\",\n          \"code\": \"encounter-diagnosis\"\n        }\n      ]\n    }\n  ],\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"http://hl7.org/fhir/sid/icd-10\",\n        \"code\": \"I10\",\n        \"display\": \"Hipertensión esencial (primaria)\"\n      }\n    ]\n  },\n  \"subject\": {\n    \"reference\": \"Patient/{{patient_id}}\"\n  },\n  \"recordedDate\": \"2025-01-15T10:30:00Z\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/Condition/{{condition_id}}",
          "host": ["{{base_url}}"],
          "path": ["Condition", "{{condition_id}}"]
        },
        "description": "Actualiza un recurso Condition existente."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Has resourceType Condition\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Condition\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "13 - Search Conditions",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/Condition?subject=Patient/{{patient_id}}",
          "host": ["{{base_url}}"],
          "path": ["Condition"],
          "query": [
            {
              "key": "subject",
              "value": "Patient/{{patient_id}}"
            }
          ]
        },
        "description": "Busca Conditions asociados a un Patient específico."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is Bundle\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "14 - Delete Condition",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{base_url}}/Condition/{{condition_id}}",
          "host": ["{{base_url}}"],
          "path": ["Condition", "{{condition_id}}"]
        },
        "description": "Elimina un recurso Condition."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200 or 204\", function () {",
              "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "15 - Create Medication",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          },
          {
            "key": "Content-Type",
            "value": "application/fhir+json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"resourceType\": \"Medication\",\n  \"status\": \"active\",\n  \"code\": {\n    \"coding\": [\n      {\n        \"system\": \"https://terminology.salud.gov.co/medicamentos/invima\",\n        \"code\": \"INVIMA-2019M-0001234\",\n        \"display\": \"Enalapril 20 mg tableta\"\n      },\n      {\n        \"system\": \"http://www.whocc.no/atc\",\n        \"code\": \"C09AA02\",\n        \"display\": \"Enalapril\"\n      }\n    ],\n    \"text\": \"Enalapril 20 mg tableta\"\n  }\n}"
        },
        "url": {
          "raw": "{{base_url}}/Medication",
          "host": ["{{base_url}}"],
          "path": ["Medication"]
        },
        "description": "Crea un nuevo recurso Medication con códigos INVIMA y ATC."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Has resourceType Medication\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Medication\");",
              "});",
              "",
              "pm.test(\"Save medication ID\", function () {",
              "    var jsonData = pm.response.json();",
              "    if (jsonData.id) {",
              "        pm.environment.set(\"medication_id\", jsonData.id);",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "16 - Read Medication",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/Medication/{{medication_id}}",
          "host": ["{{base_url}}"],
          "path": ["Medication", "{{medication_id}}"]
        },
        "description": "Lee un recurso Medication específico."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Has resourceType Medication\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Medication\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "17 - Create MedicationRequest",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          },
          {
            "key": "Content-Type",
            "value": "application/fhir+json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"resourceType\": \"MedicationRequest\",\n  \"status\": \"active\",\n  \"intent\": \"order\",\n  \"medicationCodeableConcept\": {\n    \"coding\": [\n      {\n        \"system\": \"https://terminology.salud.gov.co/medicamentos/invima\",\n        \"code\": \"INVIMA-2019M-0001234\",\n        \"display\": \"Enalapril 20 mg tableta\"\n      }\n    ],\n    \"text\": \"Enalapril 20 mg tableta\"\n  },\n  \"subject\": {\n    \"reference\": \"Patient/{{patient_id}}\"\n  },\n  \"authoredOn\": \"2025-01-15T11:00:00Z\",\n  \"dosageInstruction\": [\n    {\n      \"text\": \"1 tableta cada 12 horas por 7 días\"\n    }\n  ],\n  \"reasonCode\": [\n    {\n      \"coding\": [\n        {\n          \"system\": \"http://hl7.org/fhir/sid/icd-10\",\n          \"code\": \"I10\",\n          \"display\": \"Hipertensión esencial (primaria)\"\n        }\n      ]\n    }\n  ]\n}"
        },
        "url": {
          "raw": "{{base_url}}/MedicationRequest",
          "host": ["{{base_url}}"],
          "path": ["MedicationRequest"]
        },
        "description": "Crea un nuevo recurso MedicationRequest (receta médica) asociado a un Patient y un diagnóstico."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 201\", function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test(\"Has resourceType MedicationRequest\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"MedicationRequest\");",
              "});",
              "",
              "pm.test(\"Save medication request ID\", function () {",
              "    var jsonData = pm.response.json();",
              "    if (jsonData.id) {",
              "        pm.environment.set(\"medication_request_id\", jsonData.id);",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "18 - Read MedicationRequest",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/MedicationRequest/{{medication_request_id}}",
          "host": ["{{base_url}}"],
          "path": ["MedicationRequest", "{{medication_request_id}}"]
        },
        "description": "Lee un recurso MedicationRequest específico."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Has resourceType MedicationRequest\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"MedicationRequest\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "19 - Search MedicationRequests",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/fhir+json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/MedicationRequest?subject=Patient/{{patient_id}}&status=active",
          "host": ["{{base_url}}"],
          "path": ["MedicationRequest"],
          "query": [
            {
              "key": "subject",
              "value": "Patient/{{patient_id}}"
            },
            {
              "key": "status",
              "value": "active"
            }
          ]
        },
        "description": "Busca MedicationRequests asociados a un Patient con un estado específico."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test(\"Response is Bundle\", function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.resourceType).to.eql(\"Bundle\");",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "20 - Delete MedicationRequest",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{base_url}}/MedicationRequest/{{medication_request_id}}",
          "host": ["{{base_url}}"],
          "path": ["MedicationRequest", "{{medication_request_id}}"]
        },
        "description": "Elimina un recurso MedicationRequest."
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Status code is 200 or 204\", function () {",
              "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ]
    }
  ],
  "event": [],
  "variable": []
}

